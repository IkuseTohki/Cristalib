# データベース設計書

## 1. 概要

本ドキュメントは、蔵書管理アプリケーションが使用する SQLite データベースの設計を定義します。データモデルは `spec/specification.md` に基づいています。

## 2. データモデル

### 2.1. 蔵書テーブル (`books`)

| カラム名                 | データ型 | 説明                                               |
| :----------------------- | :------- | :------------------------------------------------- |
| `id`                     | INTEGER  | 主キー（自動採番）                                 |
| `title`                  | TEXT     | 書籍のタイトル                                     |
| `subtitle`               | TEXT     | サブタイトル                                       |
| `volume`                 | INTEGER  | 巻数                                               |
| `author`                 | TEXT     | 著者名                                             |
| `original_author`        | TEXT     | 原作者名                                           |
| `series`                 | TEXT     | シリーズ名                                         |
| `category`               | TEXT     | カテゴリ/ジャンル                                  |
| `rating`                 | INTEGER  | 評価（1〜5 など）                                  |
| `is_magazine_collection` | INTEGER  | 雑誌寄せ集め版かどうかのフラグ (0: False, 1: True) |
| `file_path`              | TEXT     | ZIP ファイルの絶対パス                             |
| `file_hash`              | TEXT     | ファイルのハッシュ値。ファイルの同一性識別に利用。 |
| `created_at`             | TEXT     | 登録日時 (ISO 8601 形式)                           |

### 2.2. スキャン対象フォルダテーブル (`scan_folders`)

| カラム名     | データ型 | 説明                                                     |
| :----------- | :------- | :------------------------------------------------------- |
| `id`         | INTEGER  | 主キー（自動採番）                                       |
| `path`       | TEXT     | フォルダの絶対パス                                       |
| `is_private` | INTEGER  | プライベートフォルダかどうかのフラグ (0: False, 1: True) |

### 2.3. 除外フォルダテーブル (`exclude_folders`)

| カラム名 | データ型 | 説明               |
| :------- | :------- | :----------------- |
| `id`     | INTEGER  | 主キー（自動採番） |
| `path`   | TEXT     | フォルダの絶対パス |

### 2.4. アプリケーション設定テーブル (`app_settings`)

| カラム名 | データ型 | 説明                                             |
| :------- | :------- | :----------------------------------------------- |
| `key`    | TEXT     | 設定項目名（例: 'password_hash', 'viewer_path'） |
| `value`  | TEXT     | 設定値                                           |
